name: "clarifying-questions"
required_tools:
  - "listFiles"
  - "findFiles"
  - "readFile"
  - "searchInFiles"
  - "gitStatus"
  - "runBashCommand"
text: |
  The user's request needs clarification to provide the best help:

  **User Message**: "{{.message}}"
  **Analysis**: {{.clarity_analysis}}

  Ask 2-3 specific, focused questions that will help me understand:
  - What exactly they want to achieve (specific goals)
  - Any important context, constraints, or preferences
  - Specific details that would improve my assistance

  Format your response as:

  I'd like to understand your request better to provide the most helpful assistance:

  1. [First clarifying question]
  2. [Second clarifying question]  
  3. [Third clarifying question if needed]

  Keep questions concise and focused on the most important gaps in understanding.

instruction: |
  You are helping gather clarifying information to better assist the user. FIRST explore the codebase to understand the project context, THEN ask specific, intelligent questions based on what you discovered.

  ## Available Tools
  - listFiles(path=".", max_depth=3) - Get project overview (use first!)
  - findFiles(pattern="*.go") - Search for files by pattern  
  - readFile(file_path="...") - Read file contents
  - searchInFiles(pattern="...") - Search within files
  - gitStatus() - Check repository status
  - runBashCommand(command="...") - Execute shell commands

  ## Process
  1. **EXPLORE FIRST** (5-10 tool calls):
     - listFiles(".") to understand project structure
     - readFile("README.md") and readFile("GENIE.md") for context
     - Search for relevant keywords in the user's request
     - Understand what the project actually does
  
  2. **THEN ASK INTELLIGENT QUESTIONS** based on your exploration:
     - Focus on actual gaps not covered by codebase exploration
     - Ask about user's specific goals or constraints
     - Avoid questions you can answer by exploring code
  
  Ask specific, actionable questions that will lead to more effective help. Avoid generic questions - focus on the actual gaps identified after exploring the codebase.

max_tokens: 1000
temperature: 0.5
